# 基础

* 自带教程 `vimtutor`
* `:version` 展示vim的所有相关信息

# 文件操作

* 打开文件 `vim [filename]`（文件名包含空格时在前面加上`\`）
* 写入文件 `:w`，写入并离开`:wq`
* 离开`:q`, `:q!`表示强制离开，不保存修改内容。
* 撤销所有改动回到最初的文件`:e!`

# 移动光标

* 上下左右 `k j h l`，在前面添加数字跳多个，比如`4h`
* 移动到行首`0`，移动到行尾`$`
* 移动到下一个单词或者标点符号`w`，移动到下一个单词忽略标点符号`W`，前面可加数字。
* 移动到上一个单词或者标点符号`b`，移动到下一个单词忽略标点符号`B`，前面可加数字。
* 移动到特定行`G`，比如最后一行`G`，第一行`1G`，第23行`23G`，也可以使用`:行号`

## 滚动

- 向上滚动半屏 `ctrl + d`
- 向上滚动全屏 `ctrl + f`
- 向下滚动半屏 `ctrl + u`
- 向下滚动全屏 `ctrl + b`
- 向上滚动一行 `ctrl + e`
- 向下滚动一行 `ctrl + y`

# 编辑

* `i`表示插入，`a`表示添加，`c`表示更改，`d`表示删除，`y`表示复制，`p`表示粘贴。
* `a`与`i`都表示插入，`a`是在光标后插入，`i`是在光标前插入
* `c`与移动命令配合使用，比如`cw`修改后面的一个单词，如果光标在单词中间那就是半个单词，`c2b`修改前面2个单词，`c$`修改光标到结尾的字符，可使用大写`C`代替，`c0`修改光标到开头的字符，`cc`修改一整行
* 只覆盖一个字符`r`, 不进入编辑模式。`R`覆盖字符，最多覆盖一整行。
* `s`也可以只修改一个字符，但会进入编辑模式，而`2s`会修改光标及光标后一个字符共2个字符。`S`会替换整行内容，不管光标在哪，而`C`只能替换光标后的内容。

- 移动到行尾并编辑 `shift + a`
- 在当前位置下面创建一行并进入编辑模式 `o`
- 在当前位置上面创建一行并进入编辑模式 `O`
- 更改大小写`~`, `3~`
- 删除文本（`dw`删除单词，`dd或D`删除一行，`dw`会删到下一个单词为止，包括空格，不想删除空格就用`de`, `dE`包括标点在内的单词结尾），向前删除`db`，删到开头或结尾`d0或d$`, `D`删除光标到末尾的字符。
- 删除一个字符。删除光标所在字符`x`，删除光标前的字符`X`

## 多列编辑

### 行首插入

1. 光标在第一行行首
2. 按 `ctrl + v`
3. 按 `shift + i`
4. 写入要添加的内容
5. 按 `escape` 两次




## 整行移动

- `>>` 光标所在行右移一个tab
- `<<` 光标所在行左移一个tab
- `n>>` 光标所在行后n行(包括当前行)右移一个tab
- `:m,n>` 从第m行到第n行右移一个tab
- `:m,n>>` 从第m行到第n行右移两个tab




# 复制粘贴

- 复制前面一个单词 `vby`(v进入可视化模式，b光标前一个单词，y复制)
- 复制当前行 `yy`
- 复制当前行及以后n行 `nyy`


- 粘贴到光标后面 `p`
- 粘贴到光标前面 `P`
- 当光标在行首时，按 `9v` 选择一行


# 替换

- 替换光标下的一个字符 `r`
- 替换从光标开始的字符 `R`
- 替换当前行第一个匹配的 `:s/abc/def`
- 替换当前行所有匹配的 `:s/abc/def/g`
- 替换当前行到末尾每行第一个匹配的 `.,$s/abc/def`（每行所有匹配的加 `g`）
- 替换第n行到末尾每行第一个匹配的 `n,$s/abc/def` (每行所有匹配的加 `g`)
- 替换所有行第一个匹配的 `%s/abc/def`(每行所有匹配的加 `g`)
- 带确认替换，后面加c(confirm) `s/abc/def/gc`


# 剪切

- 剪切任意文本 `vd`(在可视化模式下,d表示剪切,y表示复制)
- 剪切一行 `dd`(`3dd` 剪切当前行及之后的行共3行)
- 剪切光标到行尾 `d$`
- 剪切光标到行首 `d^`
- 剪切光标前的单词 `db`
- 剪切光标后的单词 `dw`
- 剪切一个字符并进入编辑模式 `s`
- 剪切一个字符 `x`


# 撤销

`u`



# 寄存器

- 查看所有寄存器 `:reg`


## 系统粘贴板

在 `.vimrc` 中配置：

```
vmap "+y :w !pbcopy<CR><CR>
nmap "+p :r !pbpaste<CR><CR>
```

- 从vim复制到系统粘贴板: `"+y`
- 从系统粘贴板复制到vim: `"+p`



# 搜索 search

- 自光标位置向下搜索 `/pattern`
- 自光标位置向上搜索 `?pattern`
- 继续同方向搜索 `n`
- 继续反方向搜索 `N`
- 高亮显示搜索结果 `:set hlsearch`, 反之 `:set nohlsearch`, 高亮后取消高亮 `:noh`
- 大小写不敏感 `:set ignorecase`, 反之 `:set noignorecase`
- 如果搜索词全小写则大小写不敏感，如果有一个大写的则精确匹配 `:set noignorecase` + `:set smartcase`
- `?\Cword` 命令就只匹配单词word, `\c` 则执行忽略大小写的查询
- 搜索到末尾时不循环查找 `:set nowrapscan`, 反之 `:set wrapscan`
- 搜索光标所在单词，向下 `shift + *`, 向上 `shift + #`




# 命令行下用vim编辑

`ctrl+x, ctrl+e`



# 匹配括号

```basic
%
```



# 显示

## 显示行号

```
:set nu
```

